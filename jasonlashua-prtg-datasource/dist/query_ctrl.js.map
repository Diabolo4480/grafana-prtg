{"version":3,"sources":["../src/query_ctrl.js"],"names":["getMetricNames","scope","metricList","_","uniq","map","metric","QueryCtrl","utils","PRTGQueryController","$scope","$injector","$rootScope","$sce","templateSrv","$on","targetChange","variableChanged","init","target","targetLetters","scopeDefaults","propertyList","name","visible_name","textValueFromList","oldTarget","cloneDeep","defaults","targetDefaults","group","device","sensor","channel","raw","uri","queryString","functions","options","mode","value","filterProperty","textValueFrom","textProperty","editorModes","updateGroupList","updateDeviceList","updateSensorList","updateChannelList","errors","validateTarget","getGroupNames","partial","getDeviceNames","getSensorNames","getChannelNames","getTextProperties","newTarget","isEqual","panelCtrl","refresh","some","item","indexOf","queryOptionsText","renderQueryOptionsText","optionsMap","forOwn","key","push","join","groupList","addTemplatedVariables","datasource","prtgAPI","performGroupSuggestQuery","then","groups","groupFilter","replace","deviceList","getHosts","devices","deviceFilter","sensorList","getSensors","sensors","sensorFilter","channelList","getAllItems","channels","each","variables","variable","templated","errs","str","isRegex","isTemplateVariable","templateUrl"],"mappings":"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","file":"query_ctrl.js","sourcesContent":["/**\n * Grafana Datasource Plugin for PRTG API Interface (ALPHA)\n * Query Control Interface\n * 20170715 Jason Lashua\n *\n * Updated for es6\n */\n\nimport {QueryCtrl} from 'app/plugins/sdk';\nimport _ from 'lodash';\nimport * as utils from './utils';\nimport './css/query-editor.css!';\n\n//zabbix style function editor, create angular directives to provide flyout menu to select functions\n//import './add-metric-function.directive';\n//import './metric-function-editor.directive';\n\nexport class PRTGQueryController extends QueryCtrl {\n\n  constructor($scope, $injector, $rootScope, $sce, templateSrv) {\n    super($scope, $injector);\n    $scope.$on('typeahead-updated', () => {\n      this.targetChange();\n    });\n    \n    $rootScope.$on('template-variable-value-updated', () => this.variableChanged());\n    \n    this.init = function() {\n      var target = this.target;\n      this.templateSrv = templateSrv;\n      this.targetLetters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n      var scopeDefaults = {\n                    \n                \n        metric:{\n          propertyList: [\n            {name: \"tags\", visible_name: \"Tags\"},\n            {name: \"active\", visible_name: \"Active\"},\n            {name: \"status\", visible_name: \"Status\"},\n            {name: \"status_raw\", visible_name: \"Status (raw)\"},\n            {name: \"message_raw\", visible_name: \"Message\"},\n            {name: \"priority\", visible_name: \"Priority\"}\n          ],\n          textValueFromList: [\n            {name: \"group\", visible_name: \"Group\"},\n            {name: \"device\", visible_name: \"Device\"},\n            {name: \"sensor\", visible_name: \"Sensor\"}\n          ]\n        },\n        oldTarget: _.cloneDeep(this.target)\n      };\n      _.defaults(this, scopeDefaults);\n      \n      // Load default values\n      var targetDefaults = {\n        group: { name: \"\" },\n        device: { name: \"\" },\n        sensor: { name: \"\" },\n        channel: { name: \"\" },\n        raw: { uri: \"\", queryString: \"\" },\n        functions: [],\n        options: {\n          mode: {\n            name: \"Metrics\", value: 1,\n            filterProperty: {},\n            textValueFrom: {},\n            textProperty: {}\n          }\n        }\n      };\n      _.defaults(target, targetDefaults);\n\n      this.editorModes = {\n        1: {name: \"Metrics\", value: 1},\n        2: {name: \"Text\", value: 2},\n        3: {name: \"Raw\", value: 3}\n      };\n      this.updateGroupList();\n      this.updateDeviceList();\n      this.updateSensorList();\n      this.updateChannelList();\n\n      this.target.errors = this.validateTarget(target);\n    \n      //the zabbix-grafana guys are way more smarter than i am, brilliant idea.      \n      this.getGroupNames = _.partial(getMetricNames, this, 'groupList');\n      this.getDeviceNames = _.partial(getMetricNames, this, 'deviceList');\n      this.getSensorNames = _.partial(getMetricNames, this, 'sensorList');\n      this.getChannelNames = _.partial(getMetricNames, this, 'channelList');\n      this.getTextProperties = _.partial(getMetricNames, this, 'propertyList');\n    };\n    \n    this.init();\n  }\n  \n  switchEditorMode(mode) {\n    this.target.options.mode = mode;\n    this.targetChange();\n  }\n \n  // take action on target update and refresh the model? whatever the hell angular actually does is beyond me... \n  targetChange() {\n    var newTarget = _.cloneDeep(this.target);\n    if (!_.isEqual(this.oldTarget, this.target)) {\n      this.oldTarget = newTarget;\n      this.panelCtrl.refresh();\n    }\n  }\n  \n  variableChanged() {\n    \n    _.some(['group','device','sensor'], item => {\n        if(this.target[item].name.indexOf('$') > 0) {\n            this.targetChange();\n          } \n      });\n  }\n\n  /*\n   * Select functions: when a object is selected or typed into the input,\n   * refresh the next list based on the data entered in the previous input.\n   * This is all necessary because the only way to get values from PRTG is by knowing a sensor ID\n   * So we basically perform a single object search, one peice at a time, then we know the sensor ID, and the channel name can be picked.\n   */\n  selectGroup() {\n    this.targetChange();\n    this.updateDeviceList();\n  }\n  \n  selectDevice() {\n    this.targetChange();\n    this.updateSensorList();\n  }\n  \n  selectSensor() {\n    this.targetChange();\n    this.updateChannelList();\n  }\n  \n  selectChannel() {\n    this.targetChange();\n  }\n  onQueryOptionChange() {\n    this.queryOptionsText = this.renderQueryOptionsText();\n    this.targetChange();\n  }\n\n  renderQueryOptionsText() {\n    var optionsMap = {};\n    var options = [];\n    _.forOwn(this.target.options, (value, key) => {\n      if (value) {\n        if (value === true) {\n          // Show only option name (if enabled) for boolean options\n          options.push(optionsMap[key]);\n        } else {\n          // Show \"option = value\" for another options\n          options.push(optionsMap[key] + \" = \" + value);\n        }\n      }\n    });\n    return \"Options: \" + options.join(', ');\n  }\n  \n  /*\n   * Update the content of each list\n  */   \n  updateGroupList() {\n    this.metric.groupList = [{name: '*', visible_name: 'All'}];\n    this.addTemplatedVariables(this.metric.groupList);\n    this.datasource.prtgAPI.performGroupSuggestQuery().then(groups => {\n      _.map(groups, group => { \n        this.metric.groupList.push({name: group.group, visible_name: group.group});\n      });\n    });\n  }\n  \n  updateDeviceList() {\n    var groupFilter = this.templateSrv.replace(this.target.group.name);\n   //console.log(\"groupFilter: \" + groupFilter);\n    this.metric.deviceList = [{name: '*', visible_name: 'All'}];\n    this.addTemplatedVariables(this.metric.deviceList);\n    \n    this.datasource.prtgAPI.getHosts(groupFilter, '/.*/').then(devices => {\n      _.map(devices, device => {\n        this.metric.deviceList.push({name: device.device, visible_name: device.device});\n      });\n    });\n  }\n\n  updateSensorList() {\n    var groupFilter = this.templateSrv.replace(this.target.group.name);\n    var deviceFilter = this.templateSrv.replace(this.target.device.name);\n    this.metric.sensorList = [{name: '*', visible_name: 'All'}];\n    this.addTemplatedVariables(this.metric.sensorList);\n    this.datasource.prtgAPI.getSensors(groupFilter, deviceFilter, '/.*/').then(sensors => {\n      _.map(sensors, sensor => {\n        this.metric.sensorList.push({name: sensor.sensor, visible_name: sensor.sensor});\n      });\n    });\n  }\n\n  updateChannelList() {\n    var groupFilter = this.templateSrv.replace(this.target.group.name);\n    var deviceFilter = this.templateSrv.replace(this.target.device.name);\n    var sensorFilter = this.templateSrv.replace(this.target.sensor.name);\n    this.metric.channelList = [{name: 'status', visible_name: 'Last Message'},{name: 'messages', visible_name: 'Messages'}];\n    this.addTemplatedVariables(this.metric.channelList);\n    if (this.target.sensor) {\n      //this.datasource.prtgAPI.performChannelSuggestQuery(sensor, device).then(channels => {\n      this.datasource.prtgAPI.getAllItems(groupFilter, deviceFilter, sensorFilter).then(channels => {\n        _.map(channels, channel => {\n          this.metric.channelList.push({name: channel.name, visible_name: channel.name});\n        });\n      });\n    }\n  }\n\n  /**\n  * Add templated variables to list of available metrics\n  *\n  * @param {Array} metricList List of metrics which variables add to\n  */\n  addTemplatedVariables(metricList) {\n    _.each(this.templateSrv.variables, function(variable) {\n      metricList.push({\n        name: '$' + variable.name,\n        templated: true\n      });\n    });\n  }\n\n  // just validate the target exists for now.\n  validateTarget(target) {\n    var errs = {};\n    if (!target) {\n      errs = 'Not defined';\n    }\n    return errs;\n  }\n  \n  isRegex(str = '') {\n    return utils.isRegex(str);\n  }\n\n  isVariable(str = '') {\n    return utils.isTemplateVariable(str);\n  }  \n}\n\n// Set templateUrl as static property\nPRTGQueryController.templateUrl = './partials/query.editor.html';\n\n// I stole this from grafana-zabbix, err, I mean, I was inspired by grafana-zabbix ;) \nfunction getMetricNames(scope, metricList) {  \n  return _.uniq(_.map(scope.metric[metricList], 'name'));\n}\n"]}